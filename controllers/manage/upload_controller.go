package controllers

import (
	"fmt"
	"net/http"

	"cve-sa-backend/handles/manage"
	"cve-sa-backend/utils/tools"
	"github.com/gin-gonic/gin"
)

func Upload(c *gin.Context) {
	file, err := c.FormFile("file")
	if err != nil {
		c.String(http.StatusOK, "Uploading failed. Please select a file.")
		return
	}
	fmt.Println(file)

}

func DeleteCVE(c *gin.Context) {
	cveId := c.PostForm("deleteCVEID")
	packageName := c.PostForm("packageName")

	if cveId == "" {
		c.String(http.StatusOK, "Please enter CVE number.")
		return
	}

	result, err := manage.DeleteCVE(cveId, packageName)
	if err != nil {
		tools.Success(c, err.Error())
		return
	}
	tools.Success(c, result)
	return

}
